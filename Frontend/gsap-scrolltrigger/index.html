<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>GSAP 教學： ScrollTrigger | Lynk is here</title><meta name=description content="ScrollTrigger 是 GSAP 的一個擴充套件，用來製作滑鼠滾動觸發動畫。ScrollTrigger 提供強大的滾動控制，讓網頁動畫輕鬆實現。透過簡單的 API，你能精確掌握動畫觸發點、速度和方向，呈現更流暢、自然的視覺效果。"><link rel=icon type=image/x-icon href=/tech-blog/images/favicon.ico><meta property=og:type content=website><meta property=og:url content=https://link1515.github.io/tech-blog><meta property=og:title content="GSAP 教學： ScrollTrigger | Lynk is here"><meta property=og:description content="ScrollTrigger 是 GSAP 的一個擴充套件，用來製作滑鼠滾動觸發動畫。ScrollTrigger 提供強大的滾動控制，讓網頁動畫輕鬆實現。透過簡單的 API，你能精確掌握動畫觸發點、速度和方向，呈現更流暢、自然的視覺效果。"><meta property=og:image content=/tech-blog/images/cover/gsap.jpg><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="GSAP 教學： ScrollTrigger | Lynk is here"><meta name=twitter:description content="ScrollTrigger 是 GSAP 的一個擴充套件，用來製作滑鼠滾動觸發動畫。ScrollTrigger 提供強大的滾動控制，讓網頁動畫輕鬆實現。透過簡單的 API，你能精確掌握動畫觸發點、速度和方向，呈現更流暢、自然的視覺效果。"><meta name=twitter:image content=/tech-blog/images/cover/gsap.jpg><link rel=stylesheet href=/tech-blog/lib/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css><link rel=stylesheet href=/tech-blog/lib/prismjs/prism.min.css><link rel=stylesheet href=/tech-blog/lib/prismjs/prism-vsc-dark-plus.css><link rel=stylesheet href=/tech-blog/css/main.css><meta name=generator content="Hexo 7.3.0"></head><body data-bs-theme=dark><script>const theme=window.localStorage.getItem("theme")??"";document.body.dataset.bsTheme=theme</script><div class="min-vh-100 d-flex flex-column"><nav id=navbar class="navbar navbar-expand-lg bg-body-tertiary sticky-top shadow-sm"><div class=container-lg><a id=logo class=navbar-brand href=/tech-blog/ ><img class=me-1 src=/tech-blog/images/logo.png height=50 alt=logo> Lynk is here </a><button class="navbar-toggler px-2" type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent><i class="bi bi-list icon-20"></i></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav ms-auto mb-2 mb-lg-0"><li class=nav-item><a class=nav-link href=/tech-blog/ ><i class="bi bi-house-fill icon-20"></i> 首頁</a></li><li class=nav-item><a class=nav-link href=/tech-blog/archives><i class="bi bi-list-ul icon-20"></i> 列表</a></li><li class=nav-item><a class=nav-link href=/tech-blog/categories><i class="bi bi-folder-fill icon-20"></i> 分類</a></li><li class=nav-item><a class=nav-link href=/tech-blog/tags><i class="bi bi-tags-fill icon-20"></i> 標籤</a></li></ul><div class="d-flex justify-content-center"><button id=toggleThemeBtn class="toggleThemeBtn btn" style=border:none><i class="bi bi-lightbulb-fill icon-20"></i></button> <button id=searchBtn class="searchBtn btn" style=border:none data-bs-toggle=modal data-bs-target=#searchModal><i class="bi bi-search icon-20"></i></button></div></div></div></nav><div class="flex-grow-1 container-lg mt-4 mb-5"><div class=post><h1>GSAP 教學： ScrollTrigger</h1><small class=text-body-secondary><time datetime=2024-01-06T01:39:41.000Z>2024-01-06</time></small><hr><div class="d-flex flex-column gap-2 mb-4"><div><div class="d-flex flex-wrap gap-2"><a href=/tech-blog/categories/Frontend/ class="btn btn-secondary btn-sm"><i class="bi bi-folder-fill icon-15"></i> Frontend</a></div></div><div><div class="tagLinks d-flex flex-wrap gap-2"><a href=/tech-blog/tags/GSAP/ class="btn btn-secondary btn-sm"><i class="bi bi-tag-fill icon-15"></i> GSAP</a></div></div></div><div class="text-center mb-4"><img class="img-fluid rounded" width=1200 height=630 src=/tech-blog/images/cover/gsap.jpg alt=cover></div><div class=content><p>ScrollTrigger 是 GSAP 的一個擴充套件，用來製作滑鼠滾動觸發動畫。ScrollTrigger 提供強大的滾動控制，讓網頁動畫輕鬆實現。透過簡單的 API，你能精確掌握動畫觸發點、速度和方向，呈現更流暢、自然的視覺效果。</p><h2 id=註冊-ScrollTrigger><a href=#註冊-ScrollTrigger class=headerlink title="註冊 ScrollTrigger"></a>註冊 ScrollTrigger</h2><p>GSAP 要使用擴充套件 (<a target=_blank rel=noopener href=https://gsap.com/docs/v3/Plugins/ >plugins</a>) 都需要註冊後才能使用。註冊以後，<a target=_blank rel=noopener href=https://gsap.com/docs/v3/GSAP/Timeline/ >Tween</a> 與 <a target=_blank rel=noopener href=https://gsap.com/docs/v3/GSAP/Timeline/ >Timeline</a> 中就可以配置 <a target=_blank rel=noopener href=https://gsap.com/docs/v3/Plugins/ScrollTrigger/ >ScrollTrigger</a></p><pre class=language-javascript data-language=javascript><code class=language-javascript>import &#123; gsap &#125; from &#39;gsap&#39;;
import &#123; ScrollTrigger &#125; from &#39;gsap&#x2F;ScrollTrigger&#39;;

gsap.registerPlugin(ScrollTrigger);</code></pre><h2 id=基本使用><a href=#基本使用 class=headerlink title=基本使用></a>基本使用</h2><p>ScrollTrigger 最簡單的用法就是直接在 <code>scrollTrigger</code> 配置滾動觸發的元素，當該元素進入可視範圍後，就會開始執行動畫</p><p>以下範例執行過程為，當 <code>.box</code> 進入可視範圍後，<code>.box</code> 會旋轉一圈</p><pre class=language-javascript data-language=javascript><code class=language-javascript>gsap.to(&#39;.box&#39;, &#123;
  scrollTrigger: &#39;.box&#39;,
  rotation: 360,
&#125;);</code></pre><p><code>scrollTrigger</code> 配置項除了可以直接寫 CSS 選擇器決定觸發元素外，也可以傳入完整的<a target=_blank rel=noopener href="https://gsap.com/docs/v3/Plugins/ScrollTrigger/?page=1#config-object">配置</a>，以下先介紹幾個基本的配置</p><pre class=language-javascript data-language=javascript><code class=language-javascript>gsap.to(&#39;.box&#39;, &#123;
  scrollTrigger: &#123;
    &#x2F;**
     * 顯示標記
     * 可以更清楚的看到觸發時機
     *&#x2F;
    markers: true,

    &#x2F;**
     * 起始標記
     * 可以用字串寫 top &#x2F; bottom，也可以搭配 +&#x3D; &#x2F; -&#x3D; 做偏移調整，第一個代表 trigger 元素，第二個代表滾動條
     *&#x2F;
    start: &#39;top bottom-&#x3D;200&#39;,

    &#x2F;**
     * 結束標記
     * 與起始標記的配法相同
     *&#x2F;
    end: &#39;bottom bottom-&#x3D;100&#39;,

    &#x2F;**
     * 觸發動作
     * 四個代表:
     * 進入(滾動條起始標記由上往下對應到 trigger 起始標記)
     * 離開(滾動條結束標記由上往下對應到 trigger 結束標記)
     * 反向進入(滾動條結束標記由下往上對應到 trigger 結束標記)
     * 反向離開(滾動條起始標記由下往上對應到 trigger 起始標記)
     *
     * 可填寫的字串: &quot;play&quot;, &quot;pause&quot;, &quot;resume&quot;, &quot;reset&quot;, &quot;restart&quot;, &quot;complete&quot;, &quot;reverse&quot;, &quot;none&quot;
     *
     * 預設為 play none none none
     *&#x2F;
    toggleActions: &#39;play pause play reset&#39;,

    &#x2F;**
     * 吸附效果
     * 產生 position: sticky 效果，會從起始標記對應處吸附到結束標記對應處
     *&#x2F;
    pin: true,
  &#125;,
  rotation: 360,
&#125;);</code></pre><h2 id=滾動條控制動畫><a href=#滾動條控制動畫 class=headerlink title=滾動條控制動畫></a>滾動條控制動畫</h2><p>一般情況下，ScrollTrigger 在起始標記對應到後，就會開始撥放動畫，但除了這種模式以外 ScrollTrigger 也可以完全的透過起始與結束標記的距離來控制動畫。當我們慢慢往下滑動滾動條時，動畫就會慢慢撥放，當我們由下往上快速滾動時，動畫就會快速的倒轉，當我們停在中間時，動畫就會定格</p><p>要達到這種效果，我們可以在原本的 <code>scrollTrigger</code> 配置 <code>scrub: true</code>，整體動畫就是由標記的進度控制</p><pre class=language-javascript data-language=javascript><code class=language-javascript>gsap.to(&#39;.box&#39;, &#123;
  scrollTrigger: &#123;
    trigger: &#39;.box&#39;,
    markers: true,
    start: &#39;top bottom-&#x3D;200&#39;,
    end: &#39;bottom bottom-&#x3D;180&#39;,
    toggleActions: &#39;play pause play reset&#39;,
    pin: true,
    &#x2F;&#x2F; 必須加上此配置
    scrub: true,
  &#125;,
  rotation: 360,
&#125;);</code></pre><p><code>scrub</code> 開啟後，才可以有這種效果，而這個屬性除了可以傳布林值，也可以傳數字，而這個數字像是控制動畫摩擦力，數字愈大摩擦力愈小，所以在滾動完滾動條後，動畫還會往後再撥放一點點，整體會感覺比較沒有這麼僵硬</p><blockquote><p>這種透過標記的距離來控制動畫的方法，如果我們 <code>pin</code> 住一個全螢幕的容器，就可以透過滾動條來產生很酷炫的動畫</p></blockquote><h2 id=自動移到下一個標籤-label><a href=#自動移到下一個標籤-label class=headerlink title="自動移到下一個標籤 (label)"></a>自動移到下一個標籤 (label)</h2><p>在 Timeline 中，我們可以加入標籤 (label) 作為 Timeline 中特別的時間點，而在 ScrollTrigger 中，我們可以指定滾動條自動移到下一個標籤</p><p>這時候，我們需要在 <code>scrollTrigger</code> 中的參數加上 <code>snap</code></p><pre class=language-javascript data-language=javascript><code class=language-javascript>const tl &#x3D; gsap.timeline(&#123;
  scrollTrigger: &#123;
    trigger: &#39;.box&#39;,
    markers: true,
    start: &#39;top bottom-&#x3D;200&#39;,
    end: &#39;bottom bottom-&#x3D;180&#39;,
    toggleActions: &#39;play pause play reset&#39;,
    pin: true,
    scrub: true,
    &#x2F;&#x2F; 滾動條將自動滾到離當前方向最近的標籤
    snap: &#39;labelsDirectional&#39;,
  &#125;,
&#125;);

&#x2F;&#x2F; 加入三個 label
tl.addLabel(&#39;start&#39;)
  .to(&#39;.box&#39;, &#123; rotation: 360 &#125;)
  .addLabel(&#39;label-1&#39;)
  .to(&#39;.box&#39;, &#123; x: 200 &#125;)
  .addLabel(&#39;end&#39;);</code></pre><h3 id=snap-配置><a href=#snap-配置 class=headerlink title="snap 配置"></a>snap 配置</h3><p><code>snap</code> 參數可以傳入字串或物件</p><p>字串形式:</p><ul><li><code>labels</code> 移動到最近的標籤</li><li><code>labelsDirectional</code> 移動到當前滾動方向最近的標籤</li></ul><p>物件形式:</p><pre class=language-javascript data-language=javascript><code class=language-javascript>&#123;
  snapTo: &quot;labels&quot;, &#x2F;&#x2F; 和字串形式相同，可以填 labels 或 labelsDirectional
  duration: &#123; min: 0.2, max: 3 &#125;, &#x2F;&#x2F; 自動滾動的動畫長度
  delay: 0.2, &#x2F;&#x2F; 延遲時間
  ease: &quot;power1.inOut&quot;, &#x2F;&#x2F; timing function
&#125;</code></pre></div></div></div><footer class="footer border-top text-center py-3"><div class="container-lg text-body-secondary">© Copyright 2024 By Terry Lin</div></footer></div><div class="modal fade" id=searchModal tabindex=-1><div class=modal-dialog><div class=modal-content><div class=modal-body><div class="position-relative mb-3"><input id=searchInput class=form-control type=search style=padding-left:2.25rem> <span class="position-absolute top-50 translate-middle-y search-icon" style=left:.75rem><i class="bi bi-search"></i></span></div><div id=searchResults class="list-group list-group-flush"></div><div id=searchNoResult class="list-group list-group-flush" style=display:none><span class=list-group-item>查無結果</span></div></div></div></div></div><div class=goTopBtn><button id=goTopBtn class=shadow-sm><i class="bi bi-chevron-up"></i></button></div><script src=/tech-blog/lib/bootstrap/bootstrap.bundle.min.js></script><script src=/tech-blog/lib/prismjs/prism.min.js></script><script src=/tech-blog/lib/fuse/fuse.js></script><script src=/tech-blog/js/utils.js></script><script src=/tech-blog/js/main.js type=module></script></body></html>