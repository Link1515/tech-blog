<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>在 VSCode 中使用 Xdebug 為 PHP 除錯 | Lynk is here</title><meta name=description content="文詳細介紹了如何安裝和配置 Xdebug，並將其與 VSCode 整合以實現高效的除錯流程，無論是初學者還是有經驗的開發者，都能因此提升開發效率。"><link rel=icon type=image/x-icon href=/tech-blog/images/favicon.ico><meta property=og:type content=website><meta property=og:url content=https://link1515.github.io/tech-blog><meta property=og:title content="在 VSCode 中使用 Xdebug 為 PHP 除錯 | Lynk is here"><meta property=og:description content="文詳細介紹了如何安裝和配置 Xdebug，並將其與 VSCode 整合以實現高效的除錯流程，無論是初學者還是有經驗的開發者，都能因此提升開發效率。"><meta property=og:image content=/tech-blog/images/cover/vscode_xdebug.jpg><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="在 VSCode 中使用 Xdebug 為 PHP 除錯 | Lynk is here"><meta name=twitter:description content="文詳細介紹了如何安裝和配置 Xdebug，並將其與 VSCode 整合以實現高效的除錯流程，無論是初學者還是有經驗的開發者，都能因此提升開發效率。"><meta name=twitter:image content=/tech-blog/images/cover/vscode_xdebug.jpg><link rel=stylesheet href=/tech-blog/lib/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css><link rel=stylesheet href=/tech-blog/lib/prismjs/prism.min.css><link rel=stylesheet href=/tech-blog/lib/prismjs/prism-vsc-dark-plus.css><link rel=stylesheet href=/tech-blog/css/main.css><meta name=generator content="Hexo 7.3.0"></head><body data-bs-theme=dark><script>const theme=window.localStorage.getItem("theme")??"";document.body.dataset.bsTheme=theme</script><div class="min-vh-100 d-flex flex-column"><nav id=navbar class="navbar navbar-expand-lg bg-body-tertiary sticky-top shadow-sm"><div class=container-lg><a id=logo class=navbar-brand href=/tech-blog/ ><img class=me-1 src=/tech-blog/images/logo.png height=50 alt=logo> Lynk is here </a><button class="navbar-toggler px-2" type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent><i class="bi bi-list icon-20"></i></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav ms-auto mb-2 mb-lg-0"><li class=nav-item><a class=nav-link href=/tech-blog/ ><i class="bi bi-house-fill icon-20"></i> 首頁</a></li><li class=nav-item><a class=nav-link href=/tech-blog/archives><i class="bi bi-list-ul icon-20"></i> 列表</a></li><li class=nav-item><a class=nav-link href=/tech-blog/categories><i class="bi bi-folder-fill icon-20"></i> 分類</a></li><li class=nav-item><a class=nav-link href=/tech-blog/tags><i class="bi bi-tags-fill icon-20"></i> 標籤</a></li></ul><div class="d-flex justify-content-center"><button id=toggleThemeBtn class="toggleThemeBtn btn" style=border:none><i class="bi bi-lightbulb-fill icon-20"></i></button> <button id=searchBtn class="searchBtn btn" style=border:none data-bs-toggle=modal data-bs-target=#searchModal><i class="bi bi-search icon-20"></i></button></div></div></div></nav><div class="flex-grow-1 container-lg mt-4 mb-5"><div class=post><h1>在 VSCode 中使用 Xdebug 為 PHP 除錯</h1><small class=text-body-secondary><time datetime=2024-12-18T01:33:10.000Z>2024-12-18</time></small><hr><div class="d-flex flex-column gap-2 mb-4"><div><div class="d-flex flex-wrap gap-2"><a href=/tech-blog/categories/Others/ class="btn btn-secondary btn-sm"><i class="bi bi-folder-fill icon-15"></i> Others</a></div></div><div><div class="tagLinks d-flex flex-wrap gap-2"><a href=/tech-blog/tags/PHP/ class="btn btn-secondary btn-sm"><i class="bi bi-tag-fill icon-15"></i> PHP </a><a href=/tech-blog/tags/Xdebug/ class="btn btn-secondary btn-sm"><i class="bi bi-tag-fill icon-15"></i> Xdebug </a><a href=/tech-blog/tags/VSCode/ class="btn btn-secondary btn-sm"><i class="bi bi-tag-fill icon-15"></i> VSCode</a></div></div></div><div class="text-center mb-4"><img class="img-fluid rounded" width=1200 height=630 src=/tech-blog/images/cover/vscode_xdebug.jpg alt=cover></div><div class=content><p>文詳細介紹了如何安裝和配置 Xdebug，並將其與 VSCode 整合以實現高效的除錯流程，無論是初學者還是有經驗的開發者，都能因此提升開發效率。</p><h2 id=安裝-Xdebug><a href=#安裝-Xdebug class=headerlink title="安裝 Xdebug"></a>安裝 Xdebug</h2><h3 id=Linux><a href=#Linux class=headerlink title=Linux></a>Linux</h3><p>Linux 作業系統中，可以使用各自發行版中的套件管理工具進行安裝，如 <code>apt</code>、<code>yum</code> 等，以 Ubuntu 為例</p><pre class=language-Bash data-language=Bash><code class=language-Bash>sudo apt-get install php-xdebug</code></pre><p>不同的發行版，使用不同的套件管理工具，Xdebug 的套件名稱也會有些許不同，詳細可查看<a target=_blank rel=noopener href=https://xdebug.org/docs/install#linux>官方文件</a></p><h3 id=MacOS><a href=#MacOS class=headerlink title=MacOS></a>MacOS</h3><p>MacOS 系統中，可以使用 PECL 安裝 Xdebug</p><blockquote><p>此方法要求 PHP 透過 Homebrew 安裝</p></blockquote><pre class=language-none><code class=language-none>pecl install xdebug</code></pre><p>如果遇到安裝問題可以參考<a target=_blank rel=noopener href=https://xdebug.org/docs/install#macos-issues>官方文件 macos-issues</a></p><h3 id=Windows><a href=#Windows class=headerlink title=Windows></a>Windows</h3><p>Windows 用戶建議可以使用，Xdebug 提供的 <a target=_blank rel=noopener href=https://xdebug.org/wizard>Installation Wizard</a> 進行安裝，步驟如下</p><ol><li>在 Powershell 中輸入 <code>php -ini | clip</code>，這行指令會複製你當前 PHP 的相關資訊</li></ol><pre class=language-Bash data-language=Bash><code class=language-Bash>php -ini | clip</code></pre><ol start=2><li>開啟 <a target=_blank rel=noopener href=https://xdebug.org/wizard>Installation Wizard</a>，在文字區域中貼上 PHP 資訊 (此時可直接按 <code>Ctrl + v</code>)</li></ol><p><img src=/tech-blog/images/posts/xdebug-in-vscode/wizard_textarea.png alt=wizard_textarea></p><ol start=3><li>滾到最下面按 <code>Analyse my phpinfo() output</code> 按鈕，它就會幫我們分析當前 PHP 適合的 Xdebug 版本</li></ol><p><img src=/tech-blog/images/posts/xdebug-in-vscode/wizard_analyse_btn.png alt=wizard_analyse_btn></p><ol start=4><li>頁面跳轉後，找到 Instructions 按照步驟進行配置，先點第一點的連接安裝 Xdebug</li></ol><p><img src=/tech-blog/images/posts/xdebug-in-vscode/wizard_download_link.png alt=wizard_download_link></p><ol start=5><li>將下載的檔案重新命名為 <code>php_xdebug.dll</code>，並放入 PHP 安裝目錄下的 <code>ext</code> 資料夾中</li></ol><blockquote><p>如果不知道 PHP 安裝目錄，可以參考第三點的路徑，去掉 <code>php.ini</code> 就是 PHP 的安裝目錄了，在此目錄中，就可以找到 <code>ext</code> 資料夾<br>(以圖為範例就是 <code>D:\php\8.3.10\ext</code>)</p></blockquote><p><img src=/tech-blog/images/posts/xdebug-in-vscode/wizard_php_dir.png alt=wizard_php_dir></p><ol start=6><li>再來開啟 <code>php.ini</code> (直接使用第三點提供的路徑)，滾到文件中最下面加入以下內容</li></ol><pre class=language-none><code class=language-none>[Xdebug]
zend_extension &#x3D; xdebug</code></pre><p>如此一來，便完成了 Xdebug 的安裝，在終端機輸入</p><pre class=language-Bash data-language=Bash><code class=language-Bash>php -v</code></pre><p>檢查是否成功使用 Xdebug，如果成功就會顯示</p><p><img src=/tech-blog/images/posts/xdebug-in-vscode/xdebug_installed.png alt=xdebug_installed></p><h2 id=在-VSCode-中使用><a href=#在-VSCode-中使用 class=headerlink title="在 VSCode 中使用"></a>在 VSCode 中使用</h2><ul><li>先安裝 VSCode 中的套件 <a target=_blank rel=noopener href="https://marketplace.visualstudio.com/items?itemName=xdebug.php-debug">PHP Debug</a></li></ul><h3 id=當前腳本的除錯><a href=#當前腳本的除錯 class=headerlink title=當前腳本的除錯></a>當前腳本的除錯</h3><p>在 VSCode 中開啟 PHP 腳本後，就可以直接對此腳本進行除錯，選擇 <code>Debug current Script in Console</code></p><p><img src=/tech-blog/images/posts/xdebug-in-vscode/debug_current_file.png alt=debug_current_file></p><h3 id=監聽任意腳本除錯><a href=#監聽任意腳本除錯 class=headerlink title=監聽任意腳本除錯></a>監聽任意腳本除錯</h3><p>如果想讓 Xdebug 監聽任意的 PHP 腳本，需要進行額外配置</p><p>再次開啟 <code>php.ini</code>，並修改 Xdebug 配置為</p><pre class=language-none><code class=language-none>[Xdebug]
zend_extension &#x3D; xdebug
xdebug.mode&#x3D;debug
xdebug.idekey&#x3D;VSCODE
xdebug.start_with_request&#x3D;yes
xdebug.client_host&#x3D;&quot;127.0.0.1&quot;
xdebug.client_port&#x3D;9003</code></pre><p>存檔後，選擇 <code>Listen For Xdebug</code> 進入 debug 監聽</p><p><img src=/tech-blog/images/posts/xdebug-in-vscode/debug_from_request.png alt=debug_from_request></p><p>在監聽期間，只要執行 PHP 腳本，就會開始 debug</p><p>舉例來說，在終端機中輸入</p><pre class=language-Bash data-language=Bash><code class=language-Bash>php index.php</code></pre><p>來執行 <code>index.php</code>，此時就會直接進入該檔案中的斷點</p><blockquote><p>沒有 debug 監聽下，執行 php 腳本會出現警告<br><img src=/tech-blog/images/posts/xdebug-in-vscode/xdebug_timeout_warning.png alt=xdebug_timeout_warning></p></blockquote><blockquote><p>平時沒有使用 debug 監聽時，可以註解掉 <code>php.ini</code> 中的 <code>xdebug.mode</code> (最前面加入 <code>;</code>)</p><pre class=language-none><code class=language-none>;xdebug.mode&#x3D;debug</code></pre></blockquote></div></div></div><footer class="footer border-top text-center py-3"><div class="container-lg text-body-secondary">© Copyright 2024 By Terry Lin</div></footer></div><div class="modal fade" id=searchModal tabindex=-1><div class=modal-dialog><div class=modal-content><div class=modal-body><div class="position-relative mb-3"><input id=searchInput class=form-control type=search style=padding-left:2.25rem> <span class="position-absolute top-50 translate-middle-y search-icon" style=left:.75rem><i class="bi bi-search"></i></span></div><div id=searchResults class="list-group list-group-flush"></div><div id=searchNoResult class="list-group list-group-flush" style=display:none><span class=list-group-item>查無結果</span></div></div></div></div></div><div class=goTopBtn><button id=goTopBtn class=shadow-sm><i class="bi bi-chevron-up"></i></button></div><script src=/tech-blog/lib/bootstrap/bootstrap.bundle.min.js></script><script src=/tech-blog/lib/prismjs/prism.min.js></script><script src=/tech-blog/lib/fuse/fuse.js></script><script src=/tech-blog/js/utils.js></script><script src=/tech-blog/js/main.js type=module></script></body></html>